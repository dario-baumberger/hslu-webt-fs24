# API Documentation

## Introduction

This API provides two main routes: `/api/locations` and `/api/search`. Both routes offer methods to retrieve and manage location entries.

## Routes

### 1. /api/locations

#### Methods

##### GET /api/locations

- **Description**: Retrieves all location entries.
- **Parameters**: None
- **Response**: A JSON array of all location entries.

###### Example Request

```
GET /api/locations
```

###### Example Response

```json
[
    {
        "place_id": "abc123",
        "name": "Lorem Ipsum",
        "url": "https://maps.google.com/?cid=abs123",
        "website": "https://www.demo.com",
        "locality": "Zürich",
        "postal_code": "8044",
        "type": "Vegan und Glutenfrei"
    },
    ...
]
```

##### GET /api/locations?locality={locality}&postal_code={postal_code}

- **Description**: Retrieves location entries that match the provided locality and/or postal code.
- **Parameters**:
  - `locality` (optional): The locality to filter entries by.
  - `postal_code` (optional): The postal code to filter entries by.
- **Response**: A JSON array of matching location entries.

###### Example Request

```
GET /api/locations?locality=Zürich&postal_code=8044
```

###### Example Response

```json
[
	{
		"place_id": "abc123",
		"name": "Lorem Ipsum",
		"url": "https://maps.google.com/?cid=abs123",
		"website": "https://www.demo.com",
		"locality": "Zürich",
		"postal_code": "8044",
		"type": "Vegan und Glutenfrei"
	}
]
```

##### POST /api/locations

- **Description**: Adds a new location entry.
- **Request Body**: A JSON object containing the location details.
  - `place_id` (optional): The place ID of the location, otherwise generated by the database.
  - `name` (required): The name of the location.
  - `url` (optional): The URL to the location on Google Maps.
  - `website` (optional): The website of the location.
  - `locality` (required): The locality of the location.
  - `postal_code` (required): The postal code of the location.
  - `type` (required): The type of the location.

###### Example Request

```
POST /api/locations
Content-Type: application/json

{
   "place_id": "abc123",
	"name": "Lorem Ipsum",
	"url": "https://maps.google.com/?cid=abs123",
	"website": "https://www.demo.com",
	"locality": "Zürich",
	"postal_code": "8044",
	"type": "Vegan und Glutenfrei"
}
```

###### Example Response

This endpoint behaves similarly to `/api/locations`, but it also accepts a `search` cookie value. If no parameters are sent, the value of the `search` cookie will be used as the parameters.

```json
{ "data": "Eintrag erfolgreich hinzugefügt." }
```

### 2. /api/search

#### Methods

##### GET /api/search

- **Description**: Retrieves all location entries.
- **Parameters**: None
- **Response**: A JSON array of all location entries.

###### Example Request

```
GET /api/search
```

###### Example Response

```json
[
   {
		"place_id": "abc123",
		"name": "Lorem Ipsum",
		"url": "https://maps.google.com/?cid=abs123",
		"website": "https://www.demo.com",
		"locality": "Zürich",
		"postal_code": "8044",
		"type": "Vegan und Glutenfrei"
	},
    ...
]
```

##### GET /api/search?locality={locality}&postal_code={postal_code}

- **Description**: Retrieves location entries that match the provided locality and/or postal code.
- **Parameters**:
  - `locality` (optional): The locality to filter entries by.
  - `postal_code` (optional): The postal code to filter entries by.
- **Response**: A JSON array of matching location entries.

###### Example Request

```
GET /api/search?locality=Zürich&postal_code=8044
```

###### Example Response

```json
[
	{
		"place_id": "abc123",
		"name": "Lorem Ipsum",
		"url": "https://maps.google.com/?cid=abs123",
		"website": "https://www.demo.com",
		"locality": "Zürich",
		"postal_code": "8044",
		"type": "Vegan und Glutenfrei"
	}
]
```
